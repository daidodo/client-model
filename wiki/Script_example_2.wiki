#This is an example of command scripts

!TCP CONNECT 127.0.0.1 9527

#define a structure named "http" 

!CMD http

#RAW is similar to STR, but has no length field

RAW str1 := "POST http://127.0.0.1:12345/ HTTP/1.1\r\nContent-Length: "

#len is a variable and need not to encode/decode

!DEF U32 len

#str_len is a variable of string representation of len

RAW str_len = $(RAW len)

RAW str2 := "\r\nContent-Type: application/octet-stream\r\nConnection: Close\r\n\r\n"

#here len begins

!BEGIN(len)

#"!END(len)" is not needed because all variables will end when a real command ends

#structure ends

!CMD

#a real command named "Query Command"

!CMD Query Command

!SEND HBO

#http structure

$(http)

U32 ver := 100

U32 seq := 1234

#this "len" is NOT that "len" in http structure

U32 len

!BEGIN(len)

U8 cmd_type := 59

STR url := "http://www.google.com"

!END(len)

#when command ends, http.len ends

!CMD